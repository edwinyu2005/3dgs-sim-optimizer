# 3DGS Simulation Asset Optimizer 

[![C++17](https://img.shields.io/badge/C++-17-blue.svg)](https://isocpp.org/)
[![Python Prototype](https://img.shields.io/badge/Python-3.8+-yellow.svg)]()
[![Build](https://img.shields.io/badge/build-CMake-brightgreen.svg)]()

A high-performance C++ pipeline designed to parse, prune, and optimize raw 3D Gaussian Splatting (`.ply`) assets for large-scale Autonomous Driving (AV) simulation and log re-simulation engines.

## ‚ö†Ô∏è The Systems Bottleneck in AV Simulation
As the AV industry shifts from NeRF to 3D Gaussian Splatting (3DGS) for high-fidelity sensor simulation, memory hierarchy becomes a critical bottleneck. A raw city-block `.ply` file generated via photogrammetry/SfM can easily contain millions of splats, consuming **1GB+ of storage and massive GPU VRAM**. 

When running distributed simulation clusters (e.g., loading multi-agent scenarios), unmodified 3DGS assets lead to:
1. Severe PCIe bandwidth saturation during memory-mapped I/O streaming.
2. CUDA Out-Of-Memory (OOM) crashes on standard inference GPUs.
3. Radix Sort overhead during tile-based rasterization.

## üöÄ The Solution
This tool operates at the pre-processing stage (CPU/RAM bound) before assets are loaded into the physics engine or VRAM. It implements heuristic pruning strategies to drastically reduce asset size while maintaining strict visual fidelity.

### Core Features
* **Zero-dependency C++ Parser:** Utilizes header-only structures to efficiently map large binary `.ply` files into memory.
* **Opacity Thresholding:** Reverses the underlying Logit representations (via Sigmoid) to identify and surgically remove transparent "floater" noise generated by SfM artifacts.
* **Scalable Architecture:** Includes a rapid Python prototype (`numpy`/`plyfile`) for parameter tuning and a bare-metal C++ implementation (`CMake`) for production CI/CD pipelines.

## üìä Performance Metrics (Example: Chess Endgame Scene)
| Metric | Raw Asset (`.ply`) | Optimized Asset | Reduction |
| :--- | :--- | :--- | :--- |
| **File Size** | ~161.6 MB | ~99.8 MB | **~38.3%** |
| **Gaussian Count** | 683.3 K | 421.9 K | **~38.3%** |
| **VRAM Footprint** | ~161.6 MB | ~99.8 MB | **~38.3%** |
*Visual fidelity remains practically indistinguishable in standard WebGL/CUDA 3DGS rasterizers.*

## üõ†Ô∏è Quick Start

### Environment Setup
Run the setup script to automatically create a virtual environment and install dependencies:
```bash
chmod +x setup.sh
./setup.sh
source venv/bin/activate
```

### 1. Python Prototype (Fast Validation)
```bash
cd python_prototype
pip install -r requirements.txt
python gaussian_pruner.py --input ../data/chess_raw.ply --output ../data/chess_optimized.ply
```

### 2: SH Point Cloud Extractor (`sh_extractor.py`)
Extracts the 0th-order Direct Current (DC) components from the Spherical Harmonics matrix to reconstruct standard diffuse RGB values. This enables down-converting the complex 3DGS structure into a standard 3D point cloud for traditional physics engines and visual inspection.

![Chess Endgame Point Cloud Visualization](docs/chess_viz_example.png)
